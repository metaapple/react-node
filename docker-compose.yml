version: '3.9'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8080:80"        # 프론트엔드 + API 모두 http://localhost로 접근
    environment:
      - NODE_ENV=production
      # 필요시 DB 설정 추가
      # - MYSQL_HOST=db
      # - MYSQL_USER=root
      # - MYSQL_PASSWORD=secret
      # - MYSQL_DATABASE=board
    # 개발 시 핫리로드 원하면 아래 volumes 주석 해제
    # volumes:
    #   - ./backend:/app/backend
    #   - ./frontend:/app/frontend

  # MySQL 사용 시 주석 해제
  # db:
  #   image: mysql:8.0
  #   command: --default-authentication-plugin=mysql_native_password
  #   environment:
  #     MYSQL_ROOT_PASSWORD: secret
  #     MYSQL_DATABASE: board
  #   ports:
  #     - "3306:3306"
  #   volumes:
  #     - mysql-data:/var/lib/mysql

# volumes:
#   mysql-data: